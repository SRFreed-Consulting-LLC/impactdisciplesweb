
<div id="container">
  <dx-form id="form" [formData]="event" [colCount]="10">
    <dxi-item
      itemType="group"
      [colSpan]="10">
      <dxi-item
        itemType="button"
        [colSpan]="10"
        alignItemLabels="right"
        [buttonOptions]="addSessionButtonOptions">
      </dxi-item>
    </dxi-item>
    <dxi-item
      itemType="group"
      caption="Training Sessions"
      [colSpan]="5"
      [template]="'sessionTemplate'">
    </dxi-item>
    <dxi-item
      *ngIf="selectedTrainingSession"
      caption="Session"
      itemType="group"
      [colSpan]="5"
      [colCount]="1">
      <dx-form [formData]="selectedTrainingSession" [colCount]="2">
        <dxi-item dataField="name" [colSpan]="2">
          <dxo-label template="Session Name"></dxo-label>
        </dxi-item>
        <dxi-item
          dataField="coach"
          editorType="dxSelectBox"
          [colSpan]="2"
          [editorOptions]="{ items: coaches, searchEnabled: true, displayExpr: 'fullname', valueExpr: 'id'  }">
          <dxo-label template="Coach"></dxo-label>
        </dxi-item>
        <dxi-item
          dataField="course"
          editorType="dxSelectBox"
          [colSpan]="2"
          [editorOptions]="{ items: courses, searchEnabled: true, displayExpr: 'title', valueExpr: 'id'  }">
          <dxo-label template="Course"></dxo-label>
        </dxi-item>
        <dxi-item
          itemType="button"
          [alignItemLabels]="'center'"
          [buttonOptions]="saveSessionButtonOptions">
        </dxi-item>
        <dxi-item
          itemType="button"
          [alignItemLabels]="'center'"
          [buttonOptions]="cancelSessionButtonOptions">
        </dxi-item>
      </dx-form>
    </dxi-item>

    <div *dxTemplate="let data of 'sessionTemplate'">
      <dx-list
        [dataSource]="eventTrainingSessions"
        [height]="300"
        [displayExpr]="getTrainingSessionDisplayName"
        [allowItemDeleting]="true"
        [itemDeleteMode]="'static'"
        (onItemClick)="editSession($event)"
        (onItemDeleted)="deleteSession($event)">
        <div *dxTemplate="let item of 'item'">
          <div><b>{{ item.name }}</b></div>
          <div>
            <span *ngIf="item.course">{{ getCourseDisplayName( item.course) }}</span>
            <span *ngIf="item.coach"> - {{ getCoachDisplayName(item.coach) }}</span>
          </div>
        </div>
      </dx-list>
    </div>
  </dx-form>
</div>
